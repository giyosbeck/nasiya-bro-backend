CREATE TABLE IF NOT EXISTS clients (
	id INTEGER NOT NULL, 
	name VARCHAR NOT NULL, 
	phone VARCHAR NOT NULL, 
	passport_series VARCHAR NOT NULL, 
	passport_image_url VARCHAR, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP, 
	updated_at DATETIME, 
	manager_id INTEGER NOT NULL, passport_image_urls VARCHAR, 
	PRIMARY KEY (id), 
	FOREIGN KEY(manager_id) REFERENCES users (id)
);
INSERT INTO "clients" VALUES(1,'John Doe','+998901234567','AA1234567',NULL,'2025-07-02 05:52:09',NULL,1,NULL);
INSERT INTO "clients" VALUES(2,'Jane Smith','+998987654321','BB9876543',NULL,'2025-07-02 05:52:32',NULL,1,NULL);
INSERT INTO "clients" VALUES(3,'Ali Karimov','+998912345678','CC5555555',NULL,'2025-07-02 05:52:59',NULL,1,NULL);
INSERT INTO "clients" VALUES(4,'Sarah Wilson','+998905555555','DD7777777',NULL,'2025-07-02 05:53:32',NULL,1,NULL);
INSERT INTO "clients" VALUES(5,'Zubayr','+998903335644','AB5706694',NULL,'2025-07-02 06:03:12',NULL,2,NULL);
INSERT INTO "clients" VALUES(6,'Alice Johnson','+998906666666','EE8888888',NULL,'2025-07-02 06:04:05',NULL,1,NULL);
INSERT INTO "clients" VALUES(7,'G''iyos','+998903335644','WW23154263',NULL,'2025-07-02 19:22:03',NULL,2,NULL);
INSERT INTO "clients" VALUES(8,'Baxitoyr','+998912345678','AB234156','passports/0e31446e-0c4a-4ede-9753-3e03a0e102cd.jpg','2025-07-07 11:11:42',NULL,2,NULL);
CREATE TABLE IF NOT EXISTS "loan_payments" (
                id INTEGER PRIMARY KEY,
                amount REAL NOT NULL,
                payment_date TIMESTAMP NULL,  -- Now nullable
                due_date TIMESTAMP NOT NULL,
                status VARCHAR DEFAULT 'pending',
                is_late BOOLEAN DEFAULT 0,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                loan_id INTEGER NOT NULL, notes VARCHAR, is_full_payment BOOLEAN DEFAULT 0,
                FOREIGN KEY (loan_id) REFERENCES loans (id)
            );
INSERT INTO "loan_payments" VALUES(1,81.23,'2025-07-08 00:00:00.000000','2024-02-01 00:00:00.000000','PAID',0,'2025-07-08 00:15:13.855208',1,NULL,0);
INSERT INTO "loan_payments" VALUES(13,43.33,NULL,'2025-08-01 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855218',2,NULL,0);
INSERT INTO "loan_payments" VALUES(14,43.33,NULL,'2025-08-31 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855218',2,NULL,0);
INSERT INTO "loan_payments" VALUES(15,43.33,NULL,'2025-09-30 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855219',2,NULL,0);
INSERT INTO "loan_payments" VALUES(16,66.67,NULL,'2025-08-01 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855219',3,NULL,0);
INSERT INTO "loan_payments" VALUES(17,66.67,NULL,'2025-08-31 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855220',3,NULL,0);
INSERT INTO "loan_payments" VALUES(18,66.67,NULL,'2025-09-30 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855220',3,NULL,0);
INSERT INTO "loan_payments" VALUES(19,66.67,NULL,'2025-10-30 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855220',3,NULL,0);
INSERT INTO "loan_payments" VALUES(20,66.67,NULL,'2025-11-29 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855221',3,NULL,0);
INSERT INTO "loan_payments" VALUES(21,66.67,NULL,'2025-12-29 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855221',3,NULL,0);
INSERT INTO "loan_payments" VALUES(22,140.0,NULL,'2025-08-31 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855221',4,NULL,0);
INSERT INTO "loan_payments" VALUES(23,140.0,NULL,'2025-09-30 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855222',4,NULL,0);
INSERT INTO "loan_payments" VALUES(24,140.0,NULL,'2025-10-30 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855222',4,NULL,0);
INSERT INTO "loan_payments" VALUES(25,140.0,NULL,'2025-11-29 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855222',4,NULL,0);
INSERT INTO "loan_payments" VALUES(26,140.0,NULL,'2025-12-29 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855223',4,NULL,0);
INSERT INTO "loan_payments" VALUES(27,37.5,'2025-07-08 00:00:00.000000','2025-09-09 00:00:00.000000','PAID',0,'2025-07-08 00:15:13.855223',5,'Paid as part of full loan settlement',0);
INSERT INTO "loan_payments" VALUES(28,37.5,'2025-07-08 00:00:00.000000','2025-10-09 00:00:00.000000','PAID',0,'2025-07-08 00:15:13.855224',5,'Paid as part of full loan settlement',0);
INSERT INTO "loan_payments" VALUES(29,37.5,'2025-07-08 00:00:00.000000','2025-11-08 00:00:00.000000','PAID',0,'2025-07-08 00:15:13.855224',5,'Paid as part of full loan settlement',0);
INSERT INTO "loan_payments" VALUES(30,37.5,'2025-07-08 00:00:00.000000','2025-12-08 00:00:00.000000','PAID',0,'2025-07-08 00:15:13.855224',5,'Paid as part of full loan settlement',0);
INSERT INTO "loan_payments" VALUES(31,37.5,'2025-07-08 00:00:00.000000','2026-01-07 00:00:00.000000','PAID',0,'2025-07-08 00:15:13.855225',5,'Paid as part of full loan settlement',0);
INSERT INTO "loan_payments" VALUES(32,37.5,'2025-07-08 00:00:00.000000','2026-02-06 00:00:00.000000','PAID',0,'2025-07-08 00:15:13.855225',5,'Paid as part of full loan settlement',0);
INSERT INTO "loan_payments" VALUES(33,37.5,'2025-07-08 00:00:00.000000','2026-03-08 00:00:00.000000','PAID',0,'2025-07-08 00:15:13.855225',5,'Paid as part of full loan settlement',0);
INSERT INTO "loan_payments" VALUES(34,37.5,'2025-07-08 00:00:00.000000','2026-04-07 00:00:00.000000','PAID',0,'2025-07-08 00:15:13.855226',5,'Paid as part of full loan settlement',0);
INSERT INTO "loan_payments" VALUES(35,30.0,NULL,'2025-08-01 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855226',6,NULL,0);
INSERT INTO "loan_payments" VALUES(36,30.0,NULL,'2025-08-31 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855226',6,NULL,0);
INSERT INTO "loan_payments" VALUES(37,30.0,NULL,'2025-09-30 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855227',6,NULL,0);
INSERT INTO "loan_payments" VALUES(38,30.0,NULL,'2025-10-30 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855227',6,NULL,0);
INSERT INTO "loan_payments" VALUES(39,30.0,NULL,'2025-11-29 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855228',6,NULL,0);
INSERT INTO "loan_payments" VALUES(40,100.0,'2025-08-01 14:33:00.400000','2025-08-02 00:00:00.000000','PAID',0,'2025-07-08 00:15:13.855228',7,NULL,0);
INSERT INTO "loan_payments" VALUES(43,30.0,'2025-07-07 00:00:00.000000','2025-08-02 00:00:00.000000','PAID',0,'2025-07-08 00:15:13.855229',8,NULL,0);
INSERT INTO "loan_payments" VALUES(44,30.0,NULL,'2025-09-01 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855229',8,NULL,0);
INSERT INTO "loan_payments" VALUES(45,30.0,NULL,'2025-10-01 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855230',8,NULL,0);
INSERT INTO "loan_payments" VALUES(46,30.0,NULL,'2025-10-31 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855230',8,NULL,0);
INSERT INTO "loan_payments" VALUES(47,30.0,NULL,'2025-11-30 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855230',8,NULL,0);
INSERT INTO "loan_payments" VALUES(48,30.0,NULL,'2025-12-30 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855231',8,NULL,0);
INSERT INTO "loan_payments" VALUES(49,30.0,NULL,'2026-01-29 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855231',8,NULL,0);
INSERT INTO "loan_payments" VALUES(50,30.0,NULL,'2026-02-28 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855232',8,NULL,0);
INSERT INTO "loan_payments" VALUES(51,30.0,NULL,'2026-03-30 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855232',8,NULL,0);
INSERT INTO "loan_payments" VALUES(52,30.0,NULL,'2026-04-29 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855232',8,NULL,0);
INSERT INTO "loan_payments" VALUES(58,208.33,NULL,'2025-07-07 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855234',10,NULL,0);
INSERT INTO "loan_payments" VALUES(59,208.33,NULL,'2025-08-06 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855235',10,NULL,0);
INSERT INTO "loan_payments" VALUES(60,208.33,NULL,'2025-09-05 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855235',10,NULL,0);
INSERT INTO "loan_payments" VALUES(61,208.33,NULL,'2025-10-05 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855236',10,NULL,0);
INSERT INTO "loan_payments" VALUES(62,208.33,NULL,'2025-11-04 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855236',10,NULL,0);
INSERT INTO "loan_payments" VALUES(63,208.33,NULL,'2025-12-04 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855236',10,NULL,0);
INSERT INTO "loan_payments" VALUES(64,208.33,NULL,'2026-01-03 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855237',10,NULL,0);
INSERT INTO "loan_payments" VALUES(65,208.33,NULL,'2026-02-02 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855237',10,NULL,0);
INSERT INTO "loan_payments" VALUES(66,208.33,NULL,'2026-03-04 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855237',10,NULL,0);
INSERT INTO "loan_payments" VALUES(67,208.33,NULL,'2026-04-03 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855238',10,NULL,0);
INSERT INTO "loan_payments" VALUES(68,208.33,NULL,'2026-05-03 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855238',10,NULL,0);
INSERT INTO "loan_payments" VALUES(69,208.33,NULL,'2026-06-02 00:00:00.000000','PENDING',0,'2025-07-08 00:15:13.855238',10,NULL,0);
INSERT INTO "loan_payments" VALUES(70,900.0,'2025-07-08 00:00:00.000000','2025-07-08 00:00:00.000000','PAID',0,'2025-07-08 10:41:48.421566',9,'Full loan payment - loan completed',0);
INSERT INTO "loan_payments" VALUES(71,818.76,'2025-07-08 00:00:00.000000','2025-07-08 00:00:00.000000','PAID',0,'2025-07-08 10:46:56.531094',1,'Full loan payment - loan completed in one payment',1);
INSERT INTO "loan_payments" VALUES(72,62.5,NULL,'2025-08-31 00:00:00.000000','PENDING',0,'2025-08-01 19:22:05.158836',11,NULL,0);
INSERT INTO "loan_payments" VALUES(73,62.5,NULL,'2025-09-30 00:00:00.000000','PENDING',0,'2025-08-01 19:22:05.158841',11,NULL,0);
INSERT INTO "loan_payments" VALUES(74,62.5,NULL,'2025-10-30 00:00:00.000000','PENDING',0,'2025-08-01 19:22:05.158843',11,NULL,0);
INSERT INTO "loan_payments" VALUES(75,62.5,NULL,'2025-11-29 00:00:00.000000','PENDING',0,'2025-08-01 19:22:05.158845',11,NULL,0);
INSERT INTO "loan_payments" VALUES(76,62.5,NULL,'2025-12-29 00:00:00.000000','PENDING',0,'2025-08-01 19:22:05.158846',11,NULL,0);
INSERT INTO "loan_payments" VALUES(77,62.5,NULL,'2025-08-31 00:00:00.000000','PENDING',0,'2025-08-01 19:22:06.315432',12,NULL,0);
INSERT INTO "loan_payments" VALUES(78,62.5,NULL,'2025-09-30 00:00:00.000000','PENDING',0,'2025-08-01 19:22:06.315442',12,NULL,0);
INSERT INTO "loan_payments" VALUES(79,62.5,NULL,'2025-10-30 00:00:00.000000','PENDING',0,'2025-08-01 19:22:06.315444',12,NULL,0);
INSERT INTO "loan_payments" VALUES(80,62.5,NULL,'2025-11-29 00:00:00.000000','PENDING',0,'2025-08-01 19:22:06.315446',12,NULL,0);
INSERT INTO "loan_payments" VALUES(81,62.5,NULL,'2025-12-29 00:00:00.000000','PENDING',0,'2025-08-01 19:22:06.315447',12,NULL,0);
INSERT INTO "loan_payments" VALUES(82,62.5,NULL,'2025-08-31 00:00:00.000000','PENDING',0,'2025-08-01 19:22:08.397831',13,NULL,0);
INSERT INTO "loan_payments" VALUES(83,62.5,NULL,'2025-09-30 00:00:00.000000','PENDING',0,'2025-08-01 19:22:08.397839',13,NULL,0);
INSERT INTO "loan_payments" VALUES(84,62.5,NULL,'2025-10-30 00:00:00.000000','PENDING',0,'2025-08-01 19:22:08.397841',13,NULL,0);
INSERT INTO "loan_payments" VALUES(85,62.5,NULL,'2025-11-29 00:00:00.000000','PENDING',0,'2025-08-01 19:22:08.397843',13,NULL,0);
INSERT INTO "loan_payments" VALUES(86,62.5,NULL,'2025-12-29 00:00:00.000000','PENDING',0,'2025-08-01 19:22:08.397845',13,NULL,0);
INSERT INTO "loan_payments" VALUES(87,62.5,NULL,'2025-08-31 00:00:00.000000','PENDING',0,'2025-08-01 19:25:45.536973',14,NULL,0);
INSERT INTO "loan_payments" VALUES(88,62.5,NULL,'2025-09-30 00:00:00.000000','PENDING',0,'2025-08-01 19:25:45.536976',14,NULL,0);
INSERT INTO "loan_payments" VALUES(89,62.5,NULL,'2025-10-30 00:00:00.000000','PENDING',0,'2025-08-01 19:25:45.536976',14,NULL,0);
INSERT INTO "loan_payments" VALUES(90,62.5,NULL,'2025-11-29 00:00:00.000000','PENDING',0,'2025-08-01 19:25:45.536977',14,NULL,0);
INSERT INTO "loan_payments" VALUES(91,62.5,NULL,'2025-12-29 00:00:00.000000','PENDING',0,'2025-08-01 19:25:45.536978',14,NULL,0);
INSERT INTO "loan_payments" VALUES(92,57.5,NULL,'2025-08-31 00:00:00.000000','PENDING',0,'2025-08-01 19:31:48.454150',15,NULL,0);
INSERT INTO "loan_payments" VALUES(93,57.5,NULL,'2025-09-30 00:00:00.000000','PENDING',0,'2025-08-01 19:31:48.454152',15,NULL,0);
INSERT INTO "loan_payments" VALUES(94,57.5,NULL,'2025-10-30 00:00:00.000000','PENDING',0,'2025-08-01 19:31:48.454152',15,NULL,0);
INSERT INTO "loan_payments" VALUES(95,200.0,'2025-08-01 00:00:00.000000','2025-08-01 00:00:00.000000','PAID',0,'2025-08-01 19:33:04.080620',7,'Full loan payment - loan completed in one payment',1);
INSERT INTO "loan_payments" VALUES(96,75.0,NULL,'2025-09-02 00:00:00.000000','PENDING',0,'2025-08-03 10:55:12.224832',16,NULL,0);
INSERT INTO "loan_payments" VALUES(97,75.0,NULL,'2025-10-02 00:00:00.000000','PENDING',0,'2025-08-03 10:55:12.224835',16,NULL,0);
INSERT INTO "loan_payments" VALUES(98,75.0,NULL,'2025-11-01 00:00:00.000000','PENDING',0,'2025-08-03 10:55:12.224835',16,NULL,0);
INSERT INTO "loan_payments" VALUES(99,75.0,NULL,'2025-12-01 00:00:00.000000','PENDING',0,'2025-08-03 10:55:12.224836',16,NULL,0);
INSERT INTO "loan_payments" VALUES(100,75.0,NULL,'2025-12-31 00:00:00.000000','PENDING',0,'2025-08-03 10:55:12.224837',16,NULL,0);
CREATE TABLE IF NOT EXISTS loans (
	id INTEGER NOT NULL, 
	loan_price FLOAT NOT NULL, 
	initial_payment FLOAT NOT NULL, 
	remaining_amount FLOAT NOT NULL, 
	loan_months INTEGER NOT NULL, 
	monthly_payment FLOAT NOT NULL, 
	loan_start_date DATETIME NOT NULL, 
	video_url VARCHAR, 
	agreement_images VARCHAR, 
	is_completed BOOLEAN, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP, 
	product_id INTEGER NOT NULL, 
	client_id INTEGER NOT NULL, 
	seller_id INTEGER NOT NULL, magazine_id INTEGER, interest_rate FLOAT DEFAULT 0.0, 
	PRIMARY KEY (id), 
	FOREIGN KEY(product_id) REFERENCES products (id), 
	FOREIGN KEY(client_id) REFERENCES clients (id), 
	FOREIGN KEY(seller_id) REFERENCES users (id)
);
INSERT INTO "loans" VALUES(1,1199.99,300.0,0.0,12,81.23,'2024-01-02 10:00:00.000000',NULL,NULL,1,'2025-07-02 05:53:37',2,1,1,1,0.0);
INSERT INTO "loans" VALUES(2,180.0,50.0,130.0,3,43.33,'2025-07-02 10:00:00.000000',NULL,NULL,0,'2025-07-02 07:17:41',6,5,2,1,0.0);
INSERT INTO "loans" VALUES(3,500.0,100.0,400.0,6,66.67,'2025-07-02 10:00:00.000000','file:///var/mobile/Containers/Data/Application/8DC0B8ED-5A5E-4791-9738-0E9B548C992F/Library/Caches/ExponentExperienceData/@anonymous/mobile-app-cb6bb5b2-5de8-4861-9e62-71e50c650304/ImagePicker/D99FA983-3C1E-468C-8ACA-53C7934D17FD.mov','["file:///var/mobile/Containers/Data/Application/8DC0B8ED-5A5E-4791-9738-0E9B548C992F/Library/Caches/ExponentExperienceData/@anonymous/mobile-app-cb6bb5b2-5de8-4861-9e62-71e50c650304/ImagePicker/30830A65-8E93-47C1-AC9C-5442D709123B.png", "file:///var/mobile/Containers/Data/Application/8DC0B8ED-5A5E-4791-9738-0E9B548C992F/Library/Caches/ExponentExperienceData/@anonymous/mobile-app-cb6bb5b2-5de8-4861-9e62-71e50c650304/ImagePicker/CE7ABF7B-FB26-454C-B0E5-59139BA60B21.jpg"]',0,'2025-07-02 07:36:50',5,5,2,1,0.0);
INSERT INTO "loans" VALUES(4,800.0,100.0,700.0,5,140.0,'2025-08-01 10:00:00.000000',NULL,NULL,0,'2025-07-02 19:29:55',5,5,8,1,0.0);
INSERT INTO "loans" VALUES(5,500.0,200.0,0.0,8,37.5,'2025-08-10 10:00:00.000000',NULL,NULL,1,'2025-07-02 19:43:57',5,5,8,1,0.0);
INSERT INTO "loans" VALUES(6,200.0,50.0,150.0,5,30.0,'2025-07-02 10:00:00.000000',NULL,NULL,0,'2025-07-02 19:47:13',6,7,8,1,0.0);
INSERT INTO "loans" VALUES(7,350.0,50.0,0.0,3,100.0,'2025-07-03 10:00:00.000000',NULL,'["agreements/b826444b-0fe5-4469-ab25-f11d1b55fc35.jpg"]',1,'2025-07-03 09:29:03',5,5,2,1,0.0);
INSERT INTO "loans" VALUES(8,350.0,50.0,270.0,10,30.0,'2025-07-03 10:00:00.000000','videos/55ec84f4-98b8-48f3-990b-381c958811ab.mp4','["agreements/f6e84b24-b85e-49eb-b835-72dd0fb54664.jpg", "agreements/d2802bf9-659d-4153-a091-9b45a16bf79e.jpg"]',0,'2025-07-03 09:57:41',5,5,2,1,0.0);
INSERT INTO "loans" VALUES(9,1000.0,100.0,0.0,5,180.0,'2025-07-03 10:00:00.000000','videos/da7c6715-75de-4e4a-a9ba-962831f34eac.mov','["agreements/ede9a19f-95f5-4002-963d-0ebcf441e4ca.jpg", "agreements/d421dd9e-88fc-4aeb-a968-c020bfacef1c.jpg"]',1,'2025-07-03 11:31:01',5,7,2,1,0.0);
INSERT INTO "loans" VALUES(10,3000.0,500.0,2500.0,12,208.33,'2025-06-07 10:00:00.000000','videos/684420c9-9dd5-4082-9901-5df451c1b512.mov','["agreements/c39b392e-ef5b-45dc-b33e-e569aa5e79c4.jpg", "agreements/9e0ad39b-2222-4006-9142-2bdde802b438.jpg"]',0,'2025-07-03 12:52:38',5,5,2,1,0.0);
INSERT INTO "loans" VALUES(11,350.0,100.0,250.0,5,62.5,'2025-08-01 10:00:00.000000','videos/a6bbcc59-f632-4975-908c-3777ab4c808d.mov','["agreements/dbd950f1-ce6f-4390-8507-4740f5b386ed.jpg"]',0,'2025-08-01 19:22:05.151484',5,5,2,1,25.0);
INSERT INTO "loans" VALUES(12,350.0,100.0,250.0,5,62.5,'2025-08-01 10:00:00.000000','videos/a6bbcc59-f632-4975-908c-3777ab4c808d.mov','["agreements/dbd950f1-ce6f-4390-8507-4740f5b386ed.jpg"]',0,'2025-08-01 19:22:06.309499',5,5,2,1,25.0);
INSERT INTO "loans" VALUES(13,350.0,100.0,250.0,5,62.5,'2025-08-01 10:00:00.000000','videos/a6bbcc59-f632-4975-908c-3777ab4c808d.mov','["agreements/dbd950f1-ce6f-4390-8507-4740f5b386ed.jpg"]',0,'2025-08-01 19:22:08.393671',5,5,2,1,25.0);
INSERT INTO "loans" VALUES(14,350.0,100.0,250.0,5,62.5,'2025-08-01 10:00:00.000000','videos/aa402ad6-054d-42a9-9659-9f72d5d1578d.mov','["agreements/0a3cdeba-e769-4ff1-b3c2-07cabb4dc401.jpg"]',0,'2025-08-01 19:25:45.534000',5,5,2,1,25.0);
INSERT INTO "loans" VALUES(15,350.0,200.0,150.0,3,57.5,'2025-08-01 10:00:00.000000','videos/1c3c82dd-cb52-4fea-bfc6-0500a554c439.mov','["agreements/83392210-0618-4e9a-93d6-8c5bbd375c87.jpg"]',0,'2025-08-01 19:31:48.452931',5,8,2,1,15.0);
INSERT INTO "loans" VALUES(16,350.0,50.0,300.0,5,75.0,'2025-08-03 10:00:00.000000','videos/f95ce814-c41d-4119-9a36-ee3fb2640de5.mov','["agreements/560ad59f-1e4b-4fa1-adbd-d87c4a29d29f.png"]',0,'2025-08-03 10:55:12.219809',5,8,2,1,25.0);
CREATE TABLE IF NOT EXISTS magazines (
                id SERIAL PRIMARY KEY,
                name VARCHAR NOT NULL UNIQUE,
                description VARCHAR,
                address VARCHAR,
                phone VARCHAR,
                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
                updated_at DATETIME
            , status VARCHAR DEFAULT 'pending', subscription_end_date DATE, approved_by INTEGER);
INSERT INTO "magazines" VALUES(1,'A18',NULL,NULL,NULL,'2025-07-03 11:24:00','2025-07-04 07:29:51','ACTIVE','2026-06-29',1);
INSERT INTO "magazines" VALUES(2,'Test Magazine Store',NULL,NULL,NULL,'2025-07-03 11:24:00','2025-07-04 11:38:19','INACTIVE',NULL,NULL);
INSERT INTO "magazines" VALUES(3,'Electronics Plaza',NULL,NULL,NULL,'2025-07-03 11:24:00','2025-07-04 12:32:26','INACTIVE','2025-10-02',NULL);
INSERT INTO "magazines" VALUES(4,'Test Magazine',NULL,NULL,NULL,'2025-07-03 11:24:00',NULL,'PENDING',NULL,NULL);
INSERT INTO "magazines" VALUES(5,'aladdin',NULL,NULL,NULL,'2025-07-04 07:32:01','2025-07-04 12:32:45','ACTIVE','2025-09-02',1);
INSERT INTO "magazines" VALUES(6,'Lyuboy dokon',NULL,NULL,NULL,'2025-07-06 12:51:20','2025-07-06 16:51:43','ACTIVE','2025-09-04',1);
INSERT INTO "magazines" VALUES(7,'Mebel',NULL,NULL,NULL,'2025-08-01 14:34:59','2025-08-01 14:36:15','ACTIVE','2025-08-31',1);
INSERT INTO "magazines" VALUES(8,'Designer',NULL,NULL,NULL,'2025-08-01 18:31:34','2025-08-01 18:33:19','ACTIVE','2025-08-31',1);
CREATE TABLE IF NOT EXISTS products (
	id INTEGER NOT NULL, 
	name VARCHAR NOT NULL, 
	model VARCHAR NOT NULL, 
	price FLOAT NOT NULL, 
	count INTEGER, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP, 
	updated_at DATETIME, 
	manager_id INTEGER NOT NULL, purchase_price FLOAT, sale_price FLOAT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(manager_id) REFERENCES users (id)
);
INSERT INTO "products" VALUES(1,'iPhone 15','Pro Max',1299.99,4,'2025-07-02 05:03:29','2025-07-02 05:52:43',1,1039.992,1299.99);
INSERT INTO "products" VALUES(2,'Samsung Galaxy S24','Ultra',1199.99,2,'2025-07-02 05:03:32','2025-07-02 05:53:37',1,9.59992000000000076e+02,1199.99);
INSERT INTO "products" VALUES(3,'MacBook Pro','16-inch M3',2499.99,2,'2025-07-02 05:03:48',NULL,1,1999.992,2499.99);
INSERT INTO "products" VALUES(4,'Sony TV','65-inch OLED',1899.99,1,'2025-07-02 05:03:51',NULL,1,1.51999200000000019e+03,1899.99);
INSERT INTO "products" VALUES(5,'Telefon','iphone 12 pro',350.0,1,'2025-07-02 05:42:24','2025-08-03 05:55:12',2,280.0,350.0);
INSERT INTO "products" VALUES(6,'Plesos','kotta chotkisi',120.0,5,'2025-07-02 05:44:03','2025-07-03 22:21:27',2,96.0,120.0);
INSERT INTO "products" VALUES(7,'iphone','11 pro',350.0,19,'2025-08-01 14:33:33','2025-08-01 14:33:52',2,280.0,350.0);
CREATE TABLE IF NOT EXISTS sales (
	id INTEGER NOT NULL, 
	sale_price FLOAT NOT NULL, 
	sale_date DATETIME DEFAULT CURRENT_TIMESTAMP, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP, 
	product_id INTEGER NOT NULL, 
	seller_id INTEGER NOT NULL, magazine_id INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(product_id) REFERENCES products (id), 
	FOREIGN KEY(seller_id) REFERENCES users (id)
);
INSERT INTO "sales" VALUES(1,1200.0,'2025-07-02 05:52:43','2025-07-02 05:52:43',1,1,1);
INSERT INTO "sales" VALUES(2,380.0,'2025-07-02 06:45:31','2025-07-02 06:45:31',5,2,1);
INSERT INTO "sales" VALUES(3,350.0,'2025-07-02 07:03:38','2025-07-02 07:03:38',5,2,1);
INSERT INTO "sales" VALUES(4,200.0,'2025-07-02 13:33:59','2025-07-02 13:33:59',6,2,1);
INSERT INTO "sales" VALUES(5,600.0,'2025-07-02 13:34:21','2025-07-02 13:34:21',5,2,1);
INSERT INTO "sales" VALUES(6,500.0,'2025-07-02 13:45:00','2025-07-02 13:45:00',5,2,1);
INSERT INTO "sales" VALUES(7,200.0,'2025-07-03 22:15:55','2025-07-03 22:15:55',6,2,1);
INSERT INTO "sales" VALUES(8,800.0,'2025-07-03 22:21:27','2025-07-03 22:21:27',6,2,1);
INSERT INTO "sales" VALUES(9,150.0,'2025-07-07 15:06:47.413906','2025-07-07 15:06:47.413919',5,2,1);
INSERT INTO "sales" VALUES(10,420.0,'2025-08-01 19:33:52.250834','2025-08-01 19:33:52.250843',7,2,1);
CREATE TABLE IF NOT EXISTS transactions (
	id INTEGER NOT NULL, 
	type VARCHAR(15) NOT NULL, 
	amount FLOAT NOT NULL, 
	description VARCHAR NOT NULL, 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP, 
	sale_id INTEGER, 
	loan_id INTEGER, 
	loan_payment_id INTEGER, 
	product_id INTEGER, 
	client_id INTEGER, 
	seller_id INTEGER NOT NULL, 
	magazine_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(sale_id) REFERENCES sales (id), 
	FOREIGN KEY(loan_id) REFERENCES loans (id), 
	FOREIGN KEY(loan_payment_id) REFERENCES loan_payments (id), 
	FOREIGN KEY(product_id) REFERENCES products (id), 
	FOREIGN KEY(client_id) REFERENCES clients (id), 
	FOREIGN KEY(seller_id) REFERENCES users (id), 
	FOREIGN KEY(magazine_id) REFERENCES magazines (id)
);
INSERT INTO "transactions" VALUES(1,'SALE',1200.0,'Sale of iPhone 15 Pro Max','2025-07-02 05:52:43',1,NULL,NULL,1,NULL,1,1);
INSERT INTO "transactions" VALUES(2,'SALE',380.0,'Sale of Telefon iphone 12 pro','2025-07-02 06:45:31',2,NULL,NULL,5,NULL,2,1);
INSERT INTO "transactions" VALUES(3,'SALE',350.0,'Sale of Telefon iphone 12 pro','2025-07-02 07:03:38',3,NULL,NULL,5,NULL,2,1);
INSERT INTO "transactions" VALUES(4,'SALE',200.0,'Sale of Plesos kotta chotkisi','2025-07-02 13:33:59',4,NULL,NULL,6,NULL,2,1);
INSERT INTO "transactions" VALUES(5,'SALE',600.0,'Sale of Telefon iphone 12 pro','2025-07-02 13:34:21',5,NULL,NULL,5,NULL,2,1);
INSERT INTO "transactions" VALUES(6,'SALE',500.0,'Sale of Telefon iphone 12 pro','2025-07-02 13:45:00',6,NULL,NULL,5,NULL,2,1);
INSERT INTO "transactions" VALUES(7,'LOAN',1199.99,'Loan created for John Doe - Samsung Galaxy S24 Ultra','2025-07-02 05:53:37',NULL,1,NULL,2,1,1,1);
INSERT INTO "transactions" VALUES(8,'LOAN',180.0,'Loan created for Zubayr - Plesos kotta chotkisi','2025-07-02 07:17:41',NULL,2,NULL,6,5,2,1);
INSERT INTO "transactions" VALUES(9,'LOAN',500.0,'Loan created for Zubayr - Telefon iphone 12 pro','2025-07-02 07:36:50',NULL,3,NULL,5,5,2,1);
INSERT INTO "transactions" VALUES(10,'LOAN',800.0,'Loan created for Zubayr - Telefon iphone 12 pro','2025-07-02 19:29:55',NULL,4,NULL,5,5,8,1);
INSERT INTO "transactions" VALUES(11,'LOAN',500.0,'Loan created for Zubayr - Telefon iphone 12 pro','2025-07-02 19:43:57',NULL,5,NULL,5,5,8,1);
INSERT INTO "transactions" VALUES(12,'LOAN',200.0,'Loan created for G''iyos - Plesos kotta chotkisi','2025-07-02 19:47:13',NULL,6,NULL,6,7,8,1);
INSERT INTO "transactions" VALUES(13,'LOAN',350.0,'Loan created for Zubayr - Telefon iphone 12 pro','2025-07-03 09:29:03',NULL,7,NULL,5,5,2,1);
INSERT INTO "transactions" VALUES(14,'LOAN',350.0,'Loan created for Zubayr - Telefon iphone 12 pro','2025-07-03 09:57:41',NULL,8,NULL,5,5,2,1);
INSERT INTO "transactions" VALUES(15,'LOAN',1000.0,'Loan created for G''iyos - Telefon iphone 12 pro','2025-07-03 11:31:01',NULL,9,NULL,5,7,2,1);
INSERT INTO "transactions" VALUES(16,'LOAN',3000.0,'Loan created for Zubayr - Telefon iphone 12 pro','2025-07-03 12:52:38',NULL,10,NULL,5,5,2,1);
INSERT INTO "transactions" VALUES(17,'SALE',200.0,'Sale of Plesos kotta chotkisi','2025-07-03 22:15:55',7,NULL,NULL,6,NULL,2,1);
INSERT INTO "transactions" VALUES(18,'SALE',800.0,'Sale of Plesos kotta chotkisi','2025-07-03 22:21:27',8,NULL,NULL,6,NULL,2,1);
INSERT INTO "transactions" VALUES(19,'SALE',150.0,'Sale of Telefon iphone 12 pro','2025-07-07 15:06:47.427889',9,NULL,NULL,5,NULL,2,1);
INSERT INTO "transactions" VALUES(20,'LOAN_PAYMENT',30.0,'Payment received for loan #8 - Zubayr','2025-07-08 00:31:00.855135',NULL,8,43,NULL,5,2,1);
INSERT INTO "transactions" VALUES(21,'LOAN_PAYMENT',300.0,'Full loan payment for loan #5 - Zubayr (Loan completed)','2025-07-08 10:37:26.688960',NULL,5,NULL,NULL,5,2,1);
INSERT INTO "transactions" VALUES(22,'LOAN_PAYMENT',900.0,'Full loan payment for loan #9 - G''iyos (Loan completed)','2025-07-08 10:41:48.428556',NULL,9,NULL,NULL,7,2,1);
INSERT INTO "transactions" VALUES(23,'LOAN_PAYMENT',81.23,'Payment received for loan #1 - John Doe','2025-07-08 10:46:52.069274',NULL,1,1,NULL,1,2,1);
INSERT INTO "transactions" VALUES(24,'LOAN_PAYMENT',818.76,'Full loan payment for loan #1 - John Doe (Loan completed)','2025-07-08 10:46:56.536457',NULL,1,NULL,NULL,1,2,1);
INSERT INTO "transactions" VALUES(25,'LOAN',350.0,'Loan created for Zubayr - Telefon iphone 12 pro','2025-08-01 19:22:05.165345',NULL,11,NULL,5,5,2,1);
INSERT INTO "transactions" VALUES(26,'LOAN',350.0,'Loan created for Zubayr - Telefon iphone 12 pro','2025-08-01 19:22:06.320379',NULL,12,NULL,5,5,2,1);
INSERT INTO "transactions" VALUES(27,'LOAN',350.0,'Loan created for Zubayr - Telefon iphone 12 pro','2025-08-01 19:22:08.402982',NULL,13,NULL,5,5,2,1);
INSERT INTO "transactions" VALUES(28,'LOAN',350.0,'Loan created for Zubayr - Telefon iphone 12 pro','2025-08-01 19:25:45.540098',NULL,14,NULL,5,5,2,1);
INSERT INTO "transactions" VALUES(29,'LOAN',350.0,'Loan created for Baxitoyr - Telefon iphone 12 pro','2025-08-01 19:31:48.455954',NULL,15,NULL,5,8,2,1);
INSERT INTO "transactions" VALUES(30,'LOAN_PAYMENT',100.0,'Payment received for loan #7 - Zubayr','2025-08-01 19:33:00.295494',NULL,7,40,NULL,5,2,1);
INSERT INTO "transactions" VALUES(31,'LOAN_PAYMENT',200.0,'Full loan payment for loan #7 - Zubayr (Loan completed)','2025-08-01 19:33:04.085133',NULL,7,NULL,NULL,5,2,1);
INSERT INTO "transactions" VALUES(32,'SALE',420.0,'Sale of iphone 11 pro','2025-08-01 19:33:52.256069',10,NULL,NULL,7,NULL,2,1);
INSERT INTO "transactions" VALUES(33,'LOAN',350.0,'Loan created for Baxitoyr - Telefon iphone 12 pro','2025-08-03 10:55:12.228907',NULL,16,NULL,5,8,2,1);
CREATE TABLE IF NOT EXISTS users (
	id INTEGER NOT NULL, 
	name VARCHAR NOT NULL, 
	phone VARCHAR NOT NULL, 
	password_hash VARCHAR NOT NULL, 
	role VARCHAR(7) NOT NULL, 
	status VARCHAR(8), 
	created_at DATETIME DEFAULT CURRENT_TIMESTAMP, 
	updated_at DATETIME, 
	magazine_name VARCHAR, 
	manager_id INTEGER, magazine_id INTEGER, subscription_end_date DATE, 
	PRIMARY KEY (id), 
	FOREIGN KEY(manager_id) REFERENCES users (id)
);
INSERT INTO "users" VALUES(1,'Admin','+998901234567','$2b$12$s6esIRQ9KSxKEmexGNGz4OQXNDIskcw3KPaUKZmGDQJBxFVzNJt5q','ADMIN','ACTIVE','2025-07-01 22:10:23','2025-07-04 07:27:40',NULL,NULL,NULL,NULL);
INSERT INTO "users" VALUES(2,'Giyosiddin','+998903335644','$2b$12$Iny91unF3Cx0AcaDQnt8b.nKNyDg4n4u9tL0cfgW6EXw5TJUld1b2','MANAGER','ACTIVE','2025-07-01 23:19:02','2025-07-04 07:29:51','A18',NULL,1,'2026-06-29');
INSERT INTO "users" VALUES(4,'Another Manager','+998987654321','$2b$12$KCP5.q87ASk4NgGwTNacO./5SiuNwmtk9.v2ZkRIKCqEW/wInVRhO','MANAGER','INACTIVE','2025-07-01 23:39:48','2025-07-04 12:32:26','Electronics Plaza',NULL,3,'2025-10-02');
INSERT INTO "users" VALUES(5,'Test Seller','+998123456789','$2b$12$sWoJgK2qsKqpiCmNyqeSSOFwGlzcDQPsnFkMqReOPr1A1LofjzdFO','SELLER','PENDING','2025-07-02 11:53:10','2025-07-04 07:15:09',NULL,1,NULL,NULL);
INSERT INTO "users" VALUES(6,'Test Manager','+998999888777','$2b$12$lkTZQkFJ4/4Xuf2qwHkXs.4Ig6dS1ONy139r7k6lPwWztFidxudsK','MANAGER','PENDING','2025-07-02 11:53:28','2025-07-04 07:15:09','Test Magazine',NULL,4,NULL);
INSERT INTO "users" VALUES(7,'Manager Seller','+998111222333','$2b$12$Rt/MP492S1jUdffVYZd.Ye3uVNXD7ceUodYrMc6LEQQijftsk90Lu','SELLER','PENDING','2025-07-02 11:53:48','2025-07-04 07:15:09','Test Magazine',6,4,NULL);
INSERT INTO "users" VALUES(8,'MuhammadSaid','+998900489840','$2b$12$OjCeuHyxVFP/ERlOMWWskuf7hv3EqZ1C1.m7tYgYpDkJdutts5GtO','SELLER','PENDING','2025-07-02 12:39:53','2025-07-04 07:15:09','A18',2,1,NULL);
INSERT INTO "users" VALUES(9,'Admin','+99801234567','$2b$12$iobEVAPrCJ2QjIDv74vxL.HpYeaO2cW1thDPiaibei9l9kVQOhWqC','ADMIN','ACTIVE','2025-07-04 06:26:57',NULL,NULL,NULL,NULL,NULL);
INSERT INTO "users" VALUES(10,'MuhammadUmar','+998940489840','$2b$12$vTMy6W9WUrySkgD6.BI95uV6Dd0mJ8yZAj8WB6Gy8oZLqYjOAP7ja','MANAGER','ACTIVE','2025-07-04 07:32:01','2025-07-04 12:32:45',NULL,NULL,5,'2025-09-02');
INSERT INTO "users" VALUES(11,'Azimjon','+998994090129','$2b$12$Tiur9ONba8KYrxjMdUAIZuhA9h1l7/Fq/XJSW78uopSp66AMOD37i','MANAGER','ACTIVE','2025-07-06 12:51:20','2025-07-06 16:51:43',NULL,NULL,6,'2025-09-04');
INSERT INTO "users" VALUES(12,'Zubayr','+998880888181','$2b$12$5RcebYHucpq4TbjHtYiEkuVRu4GoBdnWfhaApWdMh2NmfDzoFa6H6','MANAGER','ACTIVE','2025-08-01 14:35:00','2025-08-01 14:36:15',NULL,NULL,7,'2025-08-31');
INSERT INTO "users" VALUES(13,'Hudoyor','+998907654321','$2b$12$RnB8ZWNp3bjmqRkXIEbouupj4NMMH1FfXKh.oUZdTvrkocgHKOPfW','MANAGER','ACTIVE','2025-08-01 18:31:34','2025-08-01 18:36:32',NULL,NULL,8,'2025-08-31');
CREATE UNIQUE INDEX ix_users_phone ON users (phone);
CREATE INDEX ix_users_id ON users (id);
CREATE UNIQUE INDEX ix_clients_passport_series ON clients (passport_series);
CREATE INDEX ix_clients_id ON clients (id);
CREATE INDEX ix_products_id ON products (id);
CREATE INDEX ix_products_name ON products (name);
CREATE INDEX ix_sales_id ON sales (id);
CREATE INDEX ix_loans_id ON loans (id);
CREATE INDEX ix_transactions_id ON transactions (id);
CREATE INDEX idx_users_phone ON users(phone);
CREATE INDEX idx_users_magazine_status ON users(magazine_id, status);
CREATE INDEX idx_users_role ON users(role);
CREATE INDEX idx_users_manager_id ON users(manager_id);
CREATE INDEX idx_products_name ON products(name);
CREATE INDEX idx_sales_seller_date ON sales(seller_id, created_at);
CREATE INDEX idx_sales_product ON sales(product_id);
CREATE INDEX idx_sales_date ON sales(created_at);
CREATE INDEX idx_loans_seller_date ON loans(seller_id, created_at);
CREATE INDEX idx_loans_client ON loans(client_id);
CREATE INDEX idx_loans_product ON loans(product_id);
CREATE INDEX idx_loans_date ON loans(created_at);
CREATE INDEX idx_clients_passport ON clients(passport_series);
CREATE INDEX idx_clients_manager ON clients(manager_id);
CREATE INDEX idx_clients_phone ON clients(phone);
CREATE INDEX idx_transactions_seller_date ON transactions(seller_id, created_at);
CREATE INDEX idx_transactions_type ON transactions(type);
CREATE INDEX idx_transactions_date ON transactions(created_at);
CREATE INDEX idx_magazines_status ON magazines(status);
CREATE INDEX idx_magazines_name ON magazines(name);
DELETE FROM "sqlite_sequence";
INSERT INTO "sqlite_sequence" VALUES('magazines',8);
